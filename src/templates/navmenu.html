{% load static %}
{% load i18n %}
{% load bootstrap_ui_tags %}

{% get_available_languages as languages %}
{% get_value_from_session_or_cookie 'DJANGO_BOOTSTRAP_UI_THEME' as theme %}

<div class="d-flex flex-column flex-md-row align-items-center p-3 px-md-4 mb-3 border-bottom box-shadow">
	<h5 class="my-0 mr-md-auto font-weight-normal text-center">
		{% if logos %}
			{% for object in logos %}
			<img class="logotenant" src="{{ object.logo_url }}">
			<a href="/" class="text-title">
				<span class="text-center">{{ titles.title }}</span>
			</a>
			{% endfor %}
		{% endif %}
	</h5>

	<nav class="navbar navbar-expand-sm navbar-light">
		<div class="container">
			<div class="collapse navbar-collapse" id="navbarNavDropdown">
				<ul class="navbar-nav">
					 <li class="nav-item">
						<a class="nav-link" href="/"><i class="fas fa-home"></i>&nbsp;{% trans "Home" %} <span class="sr-only">(current)</span></a>
					</li>

					{% if user.is_authenticated and user.is_superuser %}

					<li class="nav-item">
						<a class="nav-link" href="{% url 'patient:patientdata_list' %}"><i class="fas fa-hospital-user"></i>&nbsp;{% trans "Patient" %}</a>
					</li>
					<li class="nav-item">
						<a class="nav-link" href="{% url 'staff:staffdata_list' %}"><i class="fas fa-user-nurse"></i>&nbsp;{% trans "Staff" %}</a>
					</li>
					<li class="nav-item">
						<a class="nav-link" href="{% url 'data:data_list' %}"><i class="fas fa-table"></i>&nbsp;{% trans "Data" %}</a>
					</li>

					{% elif user.is_authenticated and user.is_staff %}

					<li class="nav-item">
						<a class="nav-link" href="{% url 'patient:patientdata_list' %}"><i class="fas fa-hospital-user"></i>&nbsp;{% trans "Patient" %}</a>
					</li>
					<li class="nav-item">
						<a class="nav-link" href="{% url 'data:data_list' %}"><i class="fas fa-table"></i>&nbsp;{% trans "Data" %}</a>
					</li>

					{% elif user.is_authenticated and user.is_patient %}

					<li class="nav-item">
						<a class="nav-link" href="{% url 'patient:patientdata_list' %}"><i class="fas fa-hospital-user"></i>&nbsp;{% trans "Patient" %}</a>
					</li>

					{% endif %}

					<li class="nav-item">
						<a class="nav-link" href="#">
							<i class="fas fa-palette"></i>&nbsp;{% trans "Theme" %}
						</a>
					</li>

				<form method="post" action="{% url 'set_theme' %}">
				{% csrf_token %}
					<li class="nav-item dropdown">
						<a class="nav-link dropdown-toggle" href="#" id="userMenu1" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
							<span class='caret'></span>
						</a>
						<div class="dropdown-menu dropdown-menu-right" aria-labelledby="userMenu1">
						<a type="submit" class="dropdown-item" href="/set_theme/bootstrap/">
							<input type="hidden" name="next" value="bootstrap">
							<input type="hidden" name="theme" value="bootstrap"/>
							{% trans "Default" %}
						</a>
						<a type="submit" class="dropdown-item" href="/set_theme/bootswatch-cosmo/">
							<input type="hidden" name="next" value="bootswatch-cosmo"/>
							<input type="hidden" name="theme" value="bootswatch-cosmo"/>
							{% trans "Cosmo" %}
						</a>
						<a type="submit" class="dropdown-item" href="/set_theme/bootswatch-darkly/">
							<input type="hidden" name="next" value="bootswatch-darkly"/>
							<input type="hidden" name="theme" value="bootswatch-darkly"/>
							{% trans "Darkly" %}
						</a>
					</li>
				</form>

					<li class="nav-item">
						<a class="nav-link" href="#">
							<i class="fa fa-language"></i>&nbsp;{% trans "Translate" %}
						</a>
					</li>

					<li class="nav-item dropdown">
						<a class="nav-link dropdown-toggle" href="#" id="userMenu" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
							<span class='caret'></span>
						</a>
						<div class="dropdown-menu dropdown-menu-right" aria-labelledby="userMenu">
						<a class="dropdown-item" href="{% url "set_language_from_url" user_language="en" %}">
							<i class="flag flag-16 flag-us"></i>{% trans "English" %}
						</a>
						<a class="dropdown-item" href="{% url "set_language_from_url" user_language="id" %}">
							<i class="flag flag-16 flag-id"></i>{% trans "Indonesia" %}
						</a>
					</li>

					{% if user.is_authenticated %}
					<li class="nav-item">
						<a class="nav-link" href="#">
							<i class="fas fa-user"></i>&nbsp;{{ user.full_name }}
						</a>
					</li>

					{% else %}

					<li class="nav-item">
						<a class="nav-link" href="#">
							<i class="fas fa-user"></i>&nbsp;{% trans "Account" %}
						</a>
					</li>

					{% endif %}

					<li class="nav-item dropdown">
						<a class="nav-link dropdown-toggle" href="#" id="userMenu" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"></a>

						{% if user.is_authenticated and user.is_superuser or user.is_staff%}

						<div class="dropdown-menu dropdown-menu-right" aria-labelledby="userMenu">
							<a class="dropdown-item" href="{% url 'accounts:account' %}">
								<i class="fas fa-user-cog"></i>&nbsp;{% trans "My Account" %}
							</a>
							<a class="dropdown-item" href="{% url 'account_change_password' %}">
								<i class="fas fa-unlock-alt"></i>&nbsp;&nbsp;{% trans "Change password" %}
							</a>
							<a class="dropdown-item" href="{% url 'accounts:signup_view' %}">
								<i class="fas fa-user-plus"></i>&nbsp;{% trans "Register" %}
							</a>
							<div class="dropdown-divider"></div>
							<a class="dropdown-item" href="/accounts/logout/">
								<i class="fas fa-sign-out-alt"></i>&nbsp;{% trans "Logout" %}
							</a>
						</div>

						{% elif user.is_authenticated and user.is_patient %}

						<div class="dropdown-menu dropdown-menu-right" aria-labelledby="userMenu">
							<a class="dropdown-item" href="{% url 'accounts:account' %}">
								<i class="fas fa-user-cog"></i>&nbsp;{% trans "My Account" %}
							</a>
							<a class="dropdown-item" href="{% url 'account_change_password' %}">
								<i class="fas fa-unlock-alt"></i>&nbsp;{% trans "Change password" %}
							</a>
							<div class="dropdown-divider"></div>
							<a class="dropdown-item" href="/accounts/logout/">
								<i class="fas fa-sign-out-alt"></i>&nbsp;{% trans "Logout" %}
							</a>
						</div>

						{% else %}

						<div class="dropdown-menu dropdown-menu-right" aria-labelledby="userMenu">
							<a class="dropdown-item" href="{% url 'accounts:login_view' %}"><i class="fas fa-sign-in-alt"></i>&nbsp;{% trans "Login" %}</a>
						</div>

						{% endif %}

					</li>
				</ul>
			</div>
		</div>
	</nav>

</div>

